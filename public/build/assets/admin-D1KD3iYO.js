class s{constructor(){this.init()}init(){this.initEventListeners(),this.initDataTables(),this.initImageUpload()}initEventListeners(){const t=document.getElementById("sidebarToggle");t&&t.addEventListener("click",()=>{document.body.classList.toggle("sidebar-collapsed")}),document.addEventListener("click",e=>{e.target.classList.contains("btn-delete")&&(confirm("¿Estás seguro de que quieres eliminar este elemento?")||e.preventDefault())}),document.querySelectorAll("form.needs-validation").forEach(e=>{e.addEventListener("submit",n=>{e.checkValidity()||(n.preventDefault(),n.stopPropagation()),e.classList.add("was-validated")})})}initDataTables(){typeof $.fn.DataTable<"u"&&$(".datatable").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"},responsive:!0,pageLength:25})}initImageUpload(){document.querySelectorAll(".image-upload").forEach(a=>{a.addEventListener("change",e=>{this.previewImage(e.target)})})}previewImage(t){const a=document.getElementById(t.dataset.preview);if(t.files&&t.files[0]){const e=new FileReader;e.onload=n=>{a.src=n.target.result,a.style.display="block"},e.readAsDataURL(t.files[0])}}async createItem(t,a){try{return await(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(a)})).json()}catch(e){window.app.handleError(e,"createItem")}}async updateItem(t,a){try{return await(await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(a)})).json()}catch(e){window.app.handleError(e,"updateItem")}}async deleteItem(t){try{return await(await fetch(t,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}})).json()}catch(a){window.app.handleError(a,"deleteItem")}}}document.addEventListener("DOMContentLoaded",()=>{document.body.classList.contains("admin-page")&&(window.adminManager=new s)});
